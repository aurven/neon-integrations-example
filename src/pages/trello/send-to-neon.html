<html>
  <head>
    <link rel="stylesheet" href="https://p.trellocdn.com/power-up.min.css" />
    <style>
      select {
        height: 30px;
      }
    </style>
    <script src="https://p.trellocdn.com/power-up.min.js"></script>
  </head>
  <body>
    <form id="estimate">
      <label for="estimateSize">Estimate:</label>
      <select name="size" id="estimateSize">
        <option value="small">Small ðŸ‘•</option>
        <option value="medium">Medium ðŸ‘š</option>
        <option value="large">Large ðŸ‘”</option>
        <option value="x-large">Extra Large ðŸ‘–</option>
      </select>
      <button type="submit" class="mod-primary">Save</button>
    </form>
    <script>
      var t = TrelloPowerUp.iframe();
      
      window.estimate.addEventListener("submit", function (event) {
        // Stop the browser trying to submit the form itself.
        event.preventDefault();
        return t
          .set("card", "shared", "estimate", window.estimateSize.value)
          .then(function () {
            t.closePopup();
          });
      });
      
      t.render(function () {
          return t
            .get("card", "shared", "estimate")
            .then(function (estimate) {
              window.estimateSize.value = estimate;
            })
            .then(function () {
              t.sizeTo("#estimate").done();
            });
      });
    </script>
  </body>
</html>
